(function(){var a=function(b){if(!(this instanceof a)){return new a(b)}this.arg=b};a.fn=a.prototype={system:{arg:this.arg,init:function(){a.fn.dataSend();a.fn.dataPrompt();a.fn.system.checkSession();a.fn.dataMake()},checkBase64:function(b){try{return btoa(atob(b))===b?true:false}catch(c){return false}},isJSON:function(b){try{return !!JSON.parse(b)}catch(c){return false}},redirect:function(b,d){let timing=d===undefined||isNaN(d)?0:d;if(timing!==-1){setTimeout(function c(){window.location.replace(b)},timing*1000)}},checkSession:function(){console.log("CheckSession Started");var b=setInterval(function(){a.fn.ajax("/Grh/system/session/","GET",null,function(c){if(a.fn.system.isJSON(c)){let data=JSON.parse(c);let information=data.information!==undefined?JSON.parse(data.information):null;let result=data.result===undefined?false:data.result;let redirect=data.redirect===undefined?null:data.redirect;if(result===false){clearInterval(b);a.fn.system.prompt({type:"basic",method:"GET",title:information.title,msg:information.msg,overlay:true,action:function(){a.fn.system.redirect(redirect,0)}})}}})},60000)},notify:{show:function(c,g,f,h){var e=this;var b=function(){return"_"+Math.random().toString(36).substr(2,9)};let body=document.body;if(body.querySelector(".notify")){let newid=b();let selectedMsgBox=body.querySelector(".notify");selectedMsgBox.setAttribute("class","notify "+c);selectedMsgBox.setAttribute("data-uq",newid);let selectedTitle=selectedMsgBox.getElementsByClassName("title")[0];selectedTitle.innerHTML=g;let selectedMsg=selectedMsgBox.getElementsByTagName("p")[0];selectedMsg.innerHTML=f;let timer=setTimeout(function d(){selectedMsgBox.classList.add("nShow");e.hide(this,newid)},500)}else{let newid=b();let msgBox=document.createElement("div");msgBox.setAttribute("class","notify "+c);msgBox.setAttribute("data-uq",newid);let closeBox=document.createElement("div");closeBox.setAttribute("class","close");let titles=document.createElement("h4");titles.setAttribute("class","title");titles.innerHTML=g;let message=document.createElement("p");message.innerHTML=f;msgBox.appendChild(closeBox);msgBox.appendChild(titles);msgBox.appendChild(message);body.appendChild(msgBox);let timer=setTimeout(function d(){msgBox.classList.add("nShow");e.hide(this,newid)},500)}if(h){console.log("Redirect Detected, Redirecting...",h);a.fn.system.redirect(h.url,h.time)}},hide:function(e,c){var b=document.getElementsByClassName("notify")[0];let closeButton=b.getElementsByClassName("close")[0];closeButton.addEventListener("click",function(f){clearTimeout(e);if(b.getAttribute("data-uq")===c){b.classList.remove("nShow")}});e=setTimeout(function d(){clearTimeout(e);if(b.getAttribute("data-uq")===c){b.classList.remove("nShow")}},5500)}},prompt:function(c){let jsonPrep;if(typeof c!=="object"){let opt=c===undefined||c===""||!this.isJSON(c)?JSON.stringify({}):c;jsonPrep=JSON.parse(opt)}else{jsonPrep=c}let body=document.body;let titlePrompt=jsonPrep.title===undefined?"Nada a Informar":jsonPrep.title;let typePrompt=jsonPrep.type===undefined?"basic":jsonPrep.type;let txtOk=jsonPrep.txtOk===undefined?"OK":jsonPrep.txtOk;let txtCancel=jsonPrep.txtCancel===undefined?"Cancelar":jsonPrep.txtCancel;let msgPrompt=jsonPrep.msg===undefined?"Nenhuma Informação Útil":jsonPrep.msg;let url=jsonPrep.url===undefined?null:jsonPrep.url;let method=jsonPrep.method===undefined?null:jsonPrep.method;let action=jsonPrep.action===undefined?function(){}:jsonPrep.action;let overlay=jsonPrep.overlay===undefined?false:jsonPrep.overlay;if(!body.querySelector(".prompt")){if(overlay){var b=document.createElement("div");b.setAttribute("class","overlay")}let promptBox=document.createElement("div");promptBox.setAttribute("class","prompt");let title=document.createElement("div");title.setAttribute("class","title pd-b-1");title.innerHTML=titlePrompt;let msg=document.createElement("div");msg.setAttribute("class","msg");msg.innerHTML=msgPrompt;let separator=document.createElement("div");separator.setAttribute("class","separator mg-tb-1");let boxFolder=document.createElement("div");let jc=typePrompt=="basic"?"jc-center":"jc-between";boxFolder.setAttribute("class","dFlex "+jc);let btnOk=document.createElement("button");btnOk.setAttribute("class","bgGreen ais-ok");btnOk.setAttribute("id","ok");btnOk.innerHTML=txtOk===undefined?"OK":txtOk;btnOk.addEventListener("click",function d(f){action();if(url!==null){a.fn.ajax(url,method,null,function g(j){if(a.fn.system.isJSON(j)){let g=JSON.parse(j);let type=g.type===undefined?null:g.type;let title=g.title===undefined?null:g.title;let msg=g.msg===undefined?null:g.msg;let redirect=g.redirect===undefined?null:g.redirect;a.fn.system.notify.show(type,title,msg,redirect)}else{a.fn.system.notify.show("error","Erro Interno","Nenhuma resposta vinda do servidor.")}})}setTimeout(function h(){if(overlay){b.classList.remove("oShow")}promptBox.classList.remove("pShow")},500)});boxFolder.appendChild(btnOk);if(typePrompt=="confirm"){let btnCancel=document.createElement("button");btnCancel.setAttribute("class","bgBlue ais-cancel");btnCancel.setAttribute("id","cancel");btnCancel.innerHTML=txtCancel===undefined?"Cancelar":txtCancel;btnCancel.addEventListener("click",function(f){if(overlay){b.classList.remove("oShow")}promptBox.classList.remove("pShow")});boxFolder.appendChild(btnCancel)}setTimeout(function e(){if(overlay){b.classList.add("oShow")}promptBox.classList.add("pShow")},500);promptBox.appendChild(title);promptBox.appendChild(msg);promptBox.appendChild(separator);promptBox.appendChild(boxFolder);if(!overlay){body.appendChild(promptBox)}else{b.appendChild(promptBox);body.appendChild(b)}}else{if(overlay){let overlaySelect=document.getElementsByClassName("overlay")[0]}let promptSelect=document.getElementsByClassName("prompt")[0];let title=promptSelect.getElementsByClassName("title")[0];let msg=promptSelect.getElementsByClassName("msg")[0];let btnOk=promptSelect.querySelector("#ok");if(typePrompt==="confirm"){let btnCancel=promptSelect.querySelector("#cancel");btnCancel.innerHTML=txtCancel}title.innerHTML=titlePrompt;msg.innerHTML=msgPrompt;btnOk.innerHTML=txtOk;setTimeout(function e(){if(overlay){overlaySelect.classList.add("oShow")}promptSelect.classList.add("pShow")},500)}},tabs:function(){let findTabs=document.querySelectorAll(".tabs");if(findTabs!==null){findTabs.forEach(function(b){})}}},dataPrompt:function(){try{let $this=this;let promptObject=document.querySelectorAll("[data-prompt]");promptObject.forEach(function b(d){d.addEventListener("click",function e(f){let dataPromptObject=f.target.attributes.getNamedItem("data-prompt").value;let wrong=0;if($this.system.checkBase64(dataPromptObject)){let decryptData=atob(dataPromptObject);if($this.system.isJSON(decryptData)){let getObj=JSON.parse(decryptData);$this.ajax(getObj.url,getObj.method,null,function g(h){$this.system.prompt(h)})}else{wrong++}}else{wrong++}if(wrong>0){$this.system.notify.show("error","Erro Interno","Não é possivel recuperar os dados do aviso!")}})})}catch(c){}},dataSend:function(){try{let $this=this;let ObjsListered=document.querySelectorAll("[data-send]");ObjsListered.forEach(function(e,c){let DataRead=e.attributes.getNamedItem("data-send").value;if($this.system.checkBase64(DataRead)){let uncryptData=atob(DataRead);if($this.system.isJSON(uncryptData)){let elementType=e.nodeName;let opts=JSON.parse(uncryptData);let method=null;if(opts.method===undefined){if(elementType==="FORM"){method="POST"}else{method="GET"}}else{method=opts.method===undefined?opts.type:opts.method}let beforeSend={};beforeSend.animate=function(j){let button=j.querySelector("button:not([type])")!==null?j.querySelector("button:not([type])"):j.querySelector("button[type=submit]");if(button!=null){button.setAttribute("disabled","disabled");button.classList.add("ais-ani-loading")}};beforeSend.stop=function(j){let button=j.querySelector("button:not([type])")!==null?j.querySelector("button:not([type])"):j.querySelector("button[type=submit]");if(button!=null){button.removeAttribute("disabled");button.classList.remove("ais-ani-loading")}};if(elementType==="FORM"){e.addEventListener("submit",function d(j){j.preventDefault();let form=j.target;let formData=new FormData(form);$this.ajax(opts.url,method,formData,function(k){if($this.system.isJSON(k)){let jsonAnswer=JSON.parse(k);let type=jsonAnswer.type===undefined?"warning":jsonAnswer.type;let title=jsonAnswer.title===undefined?"Erro na Resposta!":jsonAnswer.title;let msg=jsonAnswer.msg===undefined?"Resposta vindo do servidor não é do tipo correto para a apresentação":jsonAnswer.msg;let redirect=jsonAnswer.redirect===undefined?null:jsonAnswer.redirect;$this.system.notify.show(type,title,msg,redirect);if(jsonAnswer.callback!==undefined){let fnc=new Function(jsonAnswer.callback);fnc()}}else{$this.system.notify.show("warning","Resposta Generica!",k)}beforeSend.stop(e)},beforeSend.animate(this))})}else{if(opts.typeAction===undefined){e.addEventListener("click",function h(j){let form=j.target;$this.ajax(opts.url,method,null,function(k){if($this.system.isJSON(k)){let jsonAnswer=JSON.parse(k);let type=jsonAnswer.type===undefined?"warning":jsonAnswer.type;let title=jsonAnswer.title===undefined?"Erro na Resposta!":jsonAnswer.title;let msg=jsonAnswer.msg===undefined?"Resposta vindo do servidor não é do tipo correto para a apresentação":jsonAnswer.msg;let redirect=jsonAnswer.redirect===undefined?null:jsonAnswer.redirect;$this.system.notify.show(type,title,msg,redirect);if(jsonAnswer.callback!==undefined){let fnc=new Function(jsonAnswer.callback);fnc()}}else{$this.system.notify.show("warning","Resposta Generica!",k)}beforeSend.stop(e)},beforeSend.animate(this))})}else{if(opts.typeAction==="check"||opts.typeAction==="mark"){var g=false;e.addEventListener("click",function f(j){if(g==false){j.preventDefault();let form=j.target;$this.ajax(opts.url,method,null,function(k){if($this.system.isJSON(k)){let jsonAnswer=JSON.parse(k);let type=jsonAnswer.type===undefined?"warning":jsonAnswer.type;let title=jsonAnswer.title===undefined?"Erro na Resposta!":jsonAnswer.title;let msg=jsonAnswer.msg===undefined?"Resposta vindo do servidor não é do tipo correto para a apresentação":jsonAnswer.msg;let redirect=jsonAnswer.redirect===undefined?null:jsonAnswer.redirect;let success=jsonAnswer.success===undefined?false:jsonAnswer.success;$this.system.notify.show(type,title,msg,redirect);if(jsonAnswer.callback!==undefined){let fnc=new Function(jsonAnswer.callback);fnc()}if(success){let spcId=j.target.getAttribute("for");let chkBox=document.getElementById(spcId);if(chkBox.hasAttribute("checked")){chkBox.removeAttribute("checked")}else{chkBox.setAttribute("checked","checked")}}}else{$this.system.notify.show("warning","Resposta Generica!",k)}})}else{g=false}})}}}}}})}catch(b){this.system.notify.show("error","Exceção encontrada",b)}},dataMake:function(){let findPattern=document.querySelectorAll("[data-make]");let counterObjectCreated=0;findPattern.forEach(function(b){b.addEventListener("click",function c(e){let getAttrDataMake=b.getAttribute("data-make");if(a.fn.system.checkBase64(getAttrDataMake)){let setAttributes=function(h,g){for(var j in g){h.setAttribute(j,g[j])}};var d=atob(getAttrDataMake);if(a.fn.system.isJSON(d)){let counter=0;let ObjMake=JSON.parse(d);let assign=function f(j,h){let attributes=j.attributes;let elem=j.element;if(elem!==undefined&&elem!==""){let newObject=document.createElement(elem);if(j!==undefined){let attributes=j.attributes;setAttributes(newObject,attributes);if(counter===0){let close=document.createElement("div");let id=Math.floor(Math.random()*1000);close.setAttribute("id","close_"+id);close.setAttribute("class","close");newObject.appendChild(close);close.addEventListener("click",function g(k){let remove=document.getElementById("close_"+id);let former=remove.closest(".former");let block=remove.parentNode.parentNode.parentNode;block.removeChild(former);counterObjectCreated--})}if(j.append!==undefined){if(j.append=="parent"){let treeLength=j.parentLength;let apd=b;for(let i=0;i<treeLength;i++){apd=apd.parentNode}apd.appendChild(newObject)}else{document.querySelector(j.append).appendChild(newObject)}}else{h.appendChild(newObject)}if(j.child!==undefined){let nrArray=j.child;nrArray.forEach(function(k){assign(k,newObject)})}}}counter++};ObjMake.forEach(function(h){var g=h.limit;let title=h.title===undefined?"Novo Objeto":h.title;let msg=h.msg===undefined?"Limite alcançado de objetos":h.msg;if(counterObjectCreated<g){assign(h);counterObjectCreated++}else{a.fn.system.notify.show("info",title,msg)}})}else{console.log("Data Make receive is not in acceptable pattern")}}else{console.info("Data Make receive is not in acceptable encryptation")}})})},ajax:function(c,h,d,b,f){f===undefined?f=function(){}:f;let Ajax;try{Ajax=new XMLHttpRequest()}catch(g){try{Ajax=new ActiveXObject("Microsoft.XMLHTTP")}catch(g){try{Ajax=new ActiveXObject("Msxml2.XMLHTTP")}catch(g){this.system.notify.show("error","Seu navegador não suporta Ajax. Impossível continuar!")}}}Ajax.onreadystatechange=function(e){if(this.readyState===1||this.readyState===2||this.readyState===3){f()}if(this.readyState===4&&this.status===200){b(Ajax.responseText)}};Ajax.open(h,c,true);Ajax.send(d)}};window.$=a.fn}());$.system.init();